"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[428],{335:function(e,t,s){s.d(t,{A_:function(){return g},ry:function(){return c},oX:function(){return j.oX},tG:function(){return x},_z:function(){return j._z},de:function(){return n},XA:function(){return j.XA},e0:function(){return h},iE:function(){return w},x4:function(){return p},a$:function(){return f},E7:function(){return j.E7},M:function(){return i},zf:function(){return y},ZR:function(){return o}});var l=s(3464),r=s(4131);let a="http://localhost:4000/",n=()=>l.Z.get("".concat(a,"api/products")),c=e=>{let t=r.Z.get("x-token");return l.Z.post("".concat(a,"api/products"),e,{headers:{Authorization:t}})},i=(e,t)=>{let s=r.Z.get("x-token");return l.Z.patch("".concat(a,"api/products/").concat(e),t,{headers:{Authorization:s}})},d=e=>l.Z.post("".concat(a,"api/file/upload"),e),o=async e=>{let t=e=>e.map(e=>{let t=new FormData;return t.append("file",e),t}),s=t(e.thumbnails),l=t(e.previews);try{let e=await Promise.allSettled(s.map(e=>d(e))),t=await Promise.allSettled(l.map(e=>d(e))),r=e.filter(e=>"fulfilled"===e.status).map(e=>e.value),a=t.filter(e=>"fulfilled"===e.status).map(e=>e.value);return{thumbnailsRes:r,previewsRes:a}}catch(e){return console.error("Error subiendo im\xe1genes:",e),null}},u="http://localhost:4000/",x=async()=>l.Z.get("".concat(u,"api/categories")),h=async()=>l.Z.get("".concat(u,"api/productCategories")),m="http://localhost:4000/",p=e=>l.Z.post("".concat(m,"api/auth/login"),e),f=e=>l.Z.post("".concat(m,"api/auth/register"),e),g=e=>{let t=r.Z.get("x-token");return l.Z.patch("".concat(m,"api/auth/change-password"),e,{headers:{Authorization:"Bearer ".concat(t)}})};var j=s(723);let b="http://localhost:4000/",w=()=>{let e=r.Z.get("x-token");return l.Z.get("".concat(b,"api/users/my-account"),{headers:{Authorization:"Bearer ".concat(e)}})},y=e=>{let t=r.Z.get("x-token");return l.Z.patch("".concat(b,"api/users/update-my-account"),e,{headers:{Authorization:"Bearer ".concat(t)}})}},723:function(e,t,s){s.d(t,{E7:function(){return d},LV:function(){return n},XA:function(){return c},_z:function(){return i},oX:function(){return o}});var l=s(3464),r=s(4131);let a="http://localhost:4000/",n=e=>{let t=r.Z.get("x-token");return l.Z.post("".concat(a,"api/orders"),e,{headers:{Authorization:t}})},c=()=>{let e=r.Z.get("x-token");return l.Z.get("".concat(a,"api/orders/me"),{headers:{Authorization:e}})},i=()=>{let e=r.Z.get("x-token");return l.Z.get("".concat(a,"api/orders/admin"),{headers:{Authorization:e}})},d=(e,t)=>{let s=r.Z.get("x-token");return l.Z.patch("".concat(a,"api/orders/change-status/").concat(e),{status:t},{headers:{Authorization:s}})},o=e=>{let t=r.Z.get("x-token");return l.Z.delete("".concat(a,"api/orders/").concat(e),{headers:{Authorization:t}})}},1058:function(e,t,s){var l=s(7437),r=s(7648);s(2265),t.Z=e=>{let{title:t,pages:s}=e;return(0,l.jsx)("div",{className:"overflow-hidden shadow-breadcrumb pt-[209px] sm:pt-[155px] lg:pt-[95px] xl:pt-[165px]",children:(0,l.jsx)("div",{className:"border-t border-gray-3",children:(0,l.jsx)("div",{className:"max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0 py-5 xl:py-10",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,l.jsx)("h1",{className:"font-semibold text-dark text-xl sm:text-2xl xl:text-custom-2",children:t}),(0,l.jsxs)("ul",{className:"flex items-center gap-2",children:[(0,l.jsx)("li",{className:"text-custom-sm hover:text-blue",children:(0,l.jsx)(r.default,{href:"/",children:"Home /"})}),s.length>0&&s.map((e,t)=>(0,l.jsx)("li",{className:"text-custom-sm last:text-blue capitalize",children:e},t))]})]})})})})}},4973:function(e,t,s){s.d(t,{U:function(){return g}});var l=s(7437),r=s(2265),a=s(9089),n=s(5202),c=e=>{let{toggleDeleted:t,toggleDetails:s,toggleEdit:r}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:s,className:"hover:bg-gray-2 rounded-sm p-2 hidden md:flex",children:(0,l.jsxs)("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.99935 4.87504C7.27346 4.87504 5.87435 6.27415 5.87435 8.00004C5.87435 9.72593 7.27346 11.125 8.99935 11.125C10.7252 11.125 12.1243 9.72593 12.1243 8.00004C12.1243 6.27415 10.7252 4.87504 8.99935 4.87504ZM7.12435 8.00004C7.12435 6.96451 7.96382 6.12504 8.99935 6.12504C10.0349 6.12504 10.8743 6.96451 10.8743 8.00004C10.8743 9.03557 10.0349 9.87504 8.99935 9.87504C7.96382 9.87504 7.12435 9.03557 7.12435 8.00004Z",fill:"#495270"}),(0,l.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.99935 0.708374C5.23757 0.708374 2.70376 2.96187 1.23315 4.87243L1.20663 4.90687C0.874048 5.33882 0.567732 5.73664 0.359922 6.20704C0.137386 6.71077 0.0410156 7.25978 0.0410156 8.00004C0.0410156 8.7403 0.137386 9.28932 0.359922 9.79304C0.567734 10.2634 0.87405 10.6613 1.20664 11.0932L1.23316 11.1277C2.70376 13.0382 5.23757 15.2917 8.99935 15.2917C12.7611 15.2917 15.2949 13.0382 16.7655 11.1277L16.792 11.0932C17.1246 10.6613 17.431 10.2634 17.6388 9.79304C17.8613 9.28932 17.9577 8.7403 17.9577 8.00004C17.9577 7.25978 17.8613 6.71077 17.6388 6.20704C17.431 5.73663 17.1246 5.33881 16.792 4.90685L16.7655 4.87243C15.2949 2.96187 12.7611 0.708374 8.99935 0.708374ZM2.2237 5.63487C3.58155 3.87081 5.79132 1.95837 8.99935 1.95837C12.2074 1.95837 14.4172 3.87081 15.775 5.63487C16.1405 6.1097 16.3546 6.39342 16.4954 6.71216C16.627 7.01005 16.7077 7.37415 16.7077 8.00004C16.7077 8.62593 16.627 8.99003 16.4954 9.28792C16.3546 9.60666 16.1405 9.89038 15.775 10.3652C14.4172 12.1293 12.2074 14.0417 8.99935 14.0417C5.79132 14.0417 3.58155 12.1293 2.2237 10.3652C1.85821 9.89038 1.64413 9.60666 1.50332 9.28792C1.37171 8.99003 1.29102 8.62593 1.29102 8.00004C1.29102 7.37415 1.37171 7.01005 1.50332 6.71216C1.64413 6.39342 1.85821 6.1097 2.2237 5.63487Z",fill:"#495270"})]})}),(0,l.jsx)("button",{className:"hover:bg-gray-2 rounded-sm p-2",onClick:r,children:(0,l.jsx)(n.r3Y,{})}),(0,l.jsx)("button",{onClick:t,className:"hover:bg-gray-2 rounded-sm p-2",children:(0,l.jsx)(a.lp8,{className:"text-red"})})]})},i=e=>{let{orderItem:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"items-center justify-between py-4.5 px-7.5 hidden md:flex ",children:[(0,l.jsx)("div",{className:"min-w-[113px]",children:(0,l.jsx)("p",{className:"text-custom-sm text-dark",children:"Order"})}),(0,l.jsx)("div",{className:"min-w-[113px]",children:(0,l.jsx)("p",{className:"text-custom-sm text-dark",children:"Date"})}),(0,l.jsx)("div",{className:"min-w-[113px]",children:(0,l.jsx)("p",{className:"text-custom-sm text-dark",children:"Status"})}),(0,l.jsx)("div",{className:"min-w-[113px]",children:(0,l.jsx)("p",{className:"text-custom-sm text-dark",children:"Total"})})]}),(0,l.jsxs)("div",{className:"items-center justify-between border-t border-gray-3 py-5 px-7.5 hidden md:flex",children:[(0,l.jsx)("div",{className:"min-w-[111px]",children:(0,l.jsxs)("p",{className:"text-custom-sm text-red",children:["#",t.id.slice(-8)]})}),(0,l.jsx)("div",{className:"min-w-[175px]",children:(0,l.jsx)("p",{className:"text-custom-sm text-dark",children:t.createdAt.slice(0,10)})}),(0,l.jsx)("div",{className:"min-w-[128px]",children:(0,l.jsx)("p",{className:"inline-block text-custom-sm  py-0.5 px-2.5 rounded-[30px] capitalize ".concat("delivered"===t.status?"text-green bg-green-light-6":"canceled"===t.status?"text-red bg-red-light-6":"pending"===t.status?"text-yellow bg-yellow-light-4":"Unknown Status"),children:t.status})}),(0,l.jsx)("div",{className:"min-w-[113px]",children:(0,l.jsxs)("p",{className:"text-custom-sm text-dark",children:["$",t.total_amount]})})]}),(0,l.jsxs)("div",{className:"px-7.5 w-full",children:[(0,l.jsx)("p",{className:"font-bold",children:"Delivery address:"})," ",(0,l.jsx)("p",{children:t.delivery_address})]})]})},d=s(335);let o=e=>{let{order:t,toggleModal:s,loadOrders:r}=e,{id:a}=t,n=async()=>{try{let e=await (0,d.oX)(a);console.log(e)}catch(e){console.log(e)}finally{r(),s(!1)}};return(0,l.jsxs)("div",{className:"w-full px-10",children:[(0,l.jsx)("p",{className:"pb-2 font-medium text-xl text-dark",children:"Are you sure you want to perform this action?"}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("button",{onClick:n,className:"mt-5 mx-5 w-full rounded-[10px] border border-blue-1 bg-blue-1 text-white py-3.5 px-5 text-custom-sm bg-blue-light",children:"Accept"}),(0,l.jsx)("button",{onClick:()=>{s(!1)},className:"mt-5 mx-5 w-full rounded-[10px] border border-blue-1 bg-blue-1 text-white py-3.5 px-5 text-custom-sm bg-red-light",children:"Cancel"})]})]})};var u=s(9064),x=e=>{let{order:t,toggleModal:s,loadOrders:a}=e,[n,c]=(0,r.useState)(null==t?void 0:t.status),i=async()=>{if(!n){u.ZP.error("Please select a status");return}try{await (0,d.E7)(t.id,n)}catch(e){}finally{a(),s(!1)}};return(0,l.jsxs)("div",{className:"w-full px-10",children:[(0,l.jsx)("p",{className:"pb-2 font-medium text-dark",children:"Order Status"}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("select",{className:"w-full rounded-[10px] border border-gray-3 bg-gray-1 text-dark py-3.5 px-5 text-custom-sm",name:"status",id:"status",required:!0,onChange:e=>{c(e.target.value)},defaultValue:(null==t?void 0:t.status)||"pending",children:[(0,l.jsx)("option",{value:"pending",children:"Pending"}),(0,l.jsx)("option",{value:"delivered",children:"Delivered"}),(0,l.jsx)("option",{value:"canceled",children:"Canceled"})]}),(0,l.jsx)("button",{className:"mt-5 w-full rounded-[10px] border border-blue-1 bg-blue-1 text-white py-3.5 px-5 text-custom-sm bg-blue",onClick:i,children:"Save Changes"})]})]})},h=s(6710),m=e=>{let{order:t,toggleModal:s,loadOrders:a}=e,[n,c]=(0,r.useState)(null==t?void 0:t.status),i=async()=>{if(!n){u.ZP.error("Please select a status");return}try{await (0,d.E7)(t.id,"canceled")}catch(e){}finally{a(),s(!1)}};return(0,l.jsxs)("div",{className:"w-full px-10",children:[(0,l.jsx)("p",{className:"pb-2 font-medium text-dark",children:"Order Status"}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("select",{className:"w-full rounded-[10px] border border-gray-3 bg-gray-1 text-dark py-3.5 px-5 text-custom-sm",name:"status",id:"status",required:!0,disabled:!0,onChange:e=>{c(e.target.value)},defaultValue:(null==t?void 0:t.status)||"pending",children:(0,l.jsx)("option",{value:"canceled",children:"Canceled"})}),(0,l.jsx)("button",{className:"mt-5 w-full rounded-[10px] border border-blue-1 bg-blue-1 text-white py-3.5 px-5 text-custom-sm bg-blue",onClick:i,disabled:"canceled"===t.status||"delivered"===t.status,children:"Save Changes"})]})]})},p=e=>{let{showDetails:t,showEdit:s,showDeleted:r,toggleModal:a,order:n,loadOrders:c}=e,{userAccount:d}=(0,h.UV)();if(!t&&!s&&!r)return null;let u=d.role||"user_role";return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"backdrop-filter-sm visible fixed left-0 top-0 z-[99999] flex min-h-screen w-full justify-center items-center bg-[#000]/40 px-4 py-8 sm:px-8",children:(0,l.jsxs)("div",{className:"shadow-7 relative w-full max-w-[600px] h-[242px] scale-100 transform rounded-[15px] bg-white transition-all flex flex-col justify-center items-center",children:[(0,l.jsx)("button",{onClick:()=>a(!1),className:"text-body absolute -right-6 -top-6 z-[9999] flex h-11.5 w-11.5 items-center justify-center rounded-full border-2 border-stroke bg-white hover:text-dark",children:(0,l.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M12.9983 10.586L17.9483 5.63603L19.3623 7.05003L14.4123 12L19.3623 16.95L17.9483 18.364L12.9983 13.414L8.04828 18.364L6.63428 16.95L11.5843 12L6.63428 7.05003L8.04828 5.63603L12.9983 10.586Z",fill:"currentColor"})})}),(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(i,{orderItem:n}),s&&("admin_role"===u?(0,l.jsx)(x,{order:n,toggleModal:a,loadOrders:c}):(0,l.jsx)(m,{order:n,toggleModal:a,loadOrders:c})),r&&(0,l.jsx)(o,{order:n,toggleModal:a,loadOrders:c})]})]})})})};let f=e=>{let{item:t,loadOrders:s}=e,[a,n]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!1),[o,u]=(0,r.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("tr",{className:"",children:[(0,l.jsxs)("td",{className:"px-4 py-2 text-red-dark",children:["#",t.id.slice(-8)]}),(0,l.jsx)("td",{className:"px-4 py-2",children:t.createdAt.slice(0,10)}),(0,l.jsx)("td",{className:"px-4 py-2",children:(0,l.jsx)("p",{className:"inline-block text-custom-sm  py-0.5 px-2.5 rounded-[30px] capitalize ".concat("delivered"===t.status?"text-green bg-green-light-6":"canceled"===t.status?"text-red bg-red-light-6":"pending"===t.status?"text-yellow bg-yellow-light-4":"Unknown Status"),children:t.status})}),(0,l.jsxs)("td",{className:"px-4 py-2",children:["$",t.total_amount]}),(0,l.jsx)("td",{className:"px-4 py-2 flex ",children:(0,l.jsx)(c,{toggleDetails:()=>{n(!a)},toggleDeleted:()=>{u(!o)},toggleEdit:()=>{d(!i)}})})]},t.id),(0,l.jsx)(p,{showDetails:a,showDeleted:o,showEdit:i,toggleModal:e=>{n(e),d(e),u(e)},order:t,loadOrders:s})]})},g=e=>{let{orders:t,loadOrders:s}=e;return(0,l.jsx)("div",{children:0===t.length?(0,l.jsx)("p",{className:"py-9.5 px-4 sm:px-7.5 xl:px-10",children:"You don't have any orders!"}):(0,l.jsxs)("table",{className:"table-auto w-full mt-4",children:[(0,l.jsx)("thead",{className:"bg-background-primary text-text-base  border-b",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Order"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Total"}),(0,l.jsx)("th",{className:"px-4 py-2 text-left",children:"Action"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>(0,l.jsx)(f,{item:e,loadOrders:s},e.id))})]})})}},6710:function(e,t,s){s.d(t,{L_:function(){return n},rn:function(){return a},UV:function(){return c}});var l=s(2265),r=s(335);let a=()=>{let[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)(!1),[n,c]=(0,l.useState)(null),[i,d]=(0,l.useState)([]),o=async()=>{a(!0);try{let e=await (0,r.de)();t(e.data)}catch(e){c("Error loading products")}finally{a(!1)}};return(0,l.useEffect)(()=>{o()},[]),{shopData:e,loading:s,error:n,categoriesId:i,addCategoriesId:e=>{d([...i,e])},removeCategoriesId:e=>{let t=i;d(t=t.filter(t=>t!=e))},loadAllProduct:o}},n=()=>{let[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)([]),[n,c]=(0,l.useState)(!1),[i,d]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{c(!0);try{let[e,s]=await Promise.all([(0,r.tG)(),(0,r.e0)()]);t(e.data),a(s.data)}catch(e){d("Error loading categories")}finally{c(!1)}})()},[]),{categories:s,loading:n,error:i,allCategories:e}},c=()=>{let[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)(null),[n,c]=(0,l.useState)(),i=async()=>{try{let e=await (0,r.iE)();c(e.data)}catch(e){a(e)}finally{t(!1)}};return(0,l.useEffect)(()=>{i()},[]),{loading:e,error:s,userAccount:n,loadUserAccount:i}}}}]);